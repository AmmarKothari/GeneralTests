var rp=rp||{};rp.mg=rp.mg||{},rp.mg.widget=rp.mg.widget||{};var define=function(){};rp.mg.widget.MgWidget={_logger:void 0,_model:void 0,_view:void 0,_gameAdapter:void 0,_parentAdapter:void 0,_isIntoWidget:!1,init:function(){window.applicationId=rp.mg.widget.AppConfig.applicationId,this._model=rp.mg.widget.Model,this._model.init(this._modelUpdateCallback.bind(this)),this._logger=new rp.mg.common.Logger("MgWidget"),this._view=rp.mg.widget.View,this._gameAdapter=rp.mg.widget.GameAdapter,this._gameAdapter.init(this._onBalanceUpdate.bind(this),this._onGameViewAction.bind(this),this._onGameLoaded.bind(this)),this._parentAdapter=rp.mg.widget.ParentAppAdapter},_onMouseLeaveEvent:function(){this._isIntoWidget&&(this._logger.debug("Mouse leave the widget"),"undefined"!=typeof this._view&&this._view.isMenuListOpen&&this._view.startStopAttractMode(!0,!1),this._isIntoWidget=!1)},_onMouseEnterEvent:function(){this._isIntoWidget||(this._logger.debug("Mouse enter into the widget"),"undefined"!=typeof this._view&&this._view.startStopAttractMode(!1,!1),this._isIntoWidget=!0)},_onInactivityEvent:function(){"undefined"!=typeof this._view&&this._view.startStopAttractMode(!0,!0)},_onViewButtonClicked:function(e,t){switch(e){case rp.mg.widget.const.ButtonIds.GAMES:this._gameAdapter.toggleGamesPopup(t),t||"undefined"!=typeof this._view&&(this._logger.debug("Stopping attract mode while going to play"),this._view.startStopAttractMode(!1,!1));break;case rp.mg.widget.const.ButtonIds.INFO:this._gameAdapter.toggleInfoPopup(t);break;case rp.mg.widget.const.ButtonIds.SOUND:void 0!=this._model.getSelectedGame()?this._gameAdapter.toggleSound(t):this._gameAdapter.saveMuteState(!t),this._model.saveSessionDetails()}},_onGameViewAction:function(e){switch(this._logger.debug("_onGameViewAction: "+e),e){case rp.mg.widget.const.MessageIds.PLAYER_INACTIVE:"undefined"!=typeof this._view&&this._view.startStopAttractMode(!0,!0);break;case rp.mg.widget.const.MessageIds.UNPRESS_INFO_BUTTON:this._view.unpressInfoButton();break;case rp.mg.widget.const.MessageIds.PRESS_INFO_BUTTON:this._view.pressInfoButton();break;case rp.mg.widget.const.MessageIds.OPEN_CASHIER:this._parentAdapter.launchCashier();break;case rp.mg.widget.const.MessageIds.REFRESH_ME:this._model.loadGame()}},_onBalanceUpdate:function(e,t){this._logger.debug("_onBalanceUpdate value: "+e+", confirmed: "+t),this._model.setBalance(e),this._view.updateBalance(),t&&this._parentAdapter.sendBalanceUpdate(e)},_onGameLoaded:function(){this._model.setLoadingGame(!1),this._view.enableInfoSoundButtons()},_synchronizeMuteState:function(){"undefined"==typeof this._model.sessionDetails||this._model.sessionDetails.soundOn?this._gameAdapter.saveMuteState(!1):this._view.pressSoundButton()},_modelUpdateCallback:function(e){switch(this._logger.debug("_modelUpdateCallback messageId: "+e),e){case rp.mg.widget.const.Model.READY:this._view.init(this._onViewButtonClicked.bind(this)),"undefined"!=typeof this._view.widgetOverlay&&(this._view.widgetOverlay.mouseleave(this._onMouseLeaveEvent.bind(this)),this._view.widgetOverlay.mouseenter(this._onMouseEnterEvent.bind(this)));var t=this._model.getSelectedGame();"undefined"!=typeof t?(this._parentAdapter.init(),this._model.loadGame(),this._view.setWidgetHeader(t.title)):(this._parentAdapter.init(this._onBalanceUpdate.bind(this)),this._view.enableSoundButton()),this._synchronizeMuteState(),this._logger.debug("init() complete");break;case rp.mg.widget.const.Model.STARTING_GAME_LOADING:this._view.disableInfoSoundButtons();break;case rp.mg.widget.const.Model.GAME_URL_LOADED:this._parentAdapter.removeBalanceUpdateCallback(),this._view.displayGameContent();break;case rp.mg.widget.const.Model.ERROR_UNAUTHORIZED:this._view.displayError("invalid session")}}},define("rp/mg/widget/mgWidget",function(){});var rp=rp||{};rp.mg=rp.mg||{},rp.mg.common=rp.mg.common||{},rp.mg.common.Utils=rp.mg.common.Utils||{},rp.mg.common.Utils.addJSEventListener=function(e,t,s){function i(e){var t=s.apply(this,arguments);return t===!1&&(e.stopPropagation(),e.preventDefault()),t}function a(){var t=s.call(e,window.event);return t===!1&&(window.event.returnValue=!1,window.event.cancelBubble=!0),t}if("function"!=typeof s||!s)throw new TypeError("Listener has to be a function");if("object"!=typeof e||!e)throw new TypeError("Element has to be a DOM object");if("string"!=typeof t||!e)throw new TypeError("Event has to be a string");e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,a)},rp.mg.common.Utils.removeJSEventListener=function(e,t,s){e.removeEventListener&&e.removeEventListener(t,s,!1),e.detachEvent&&e.detachEvent("on"+t,s)},rp.mg.common.Utils.formatMoney=function(e,t,s,i){var a=t||2,o="\\d(?=(\\d{3})+"+(a>0?"\\D":"$")+")",n=(1*e).toFixed(a);return n=(i?n.replace(".",i||"."):n).replace(new RegExp(o,"g"),"$&"+(s||",")),e%1===0&&(n=n.replace(/(\.\d+)$/,"")),n},rp.mg.common.Utils.getCookie=function(e){var t=null,s=new RegExp(e+"=([^;]+)"),i=s.exec(document.cookie);return null!=i&&(t=decodeURIComponent(i[1])),t},define("rp/mg/common/utils",function(){});var rp=rp||{};rp.mg=rp.mg||{},rp.mg.common=rp.mg.common||{},rp.mg.common.Logger=function(e){this._className=e,this._logMessage=function(e,t){if(""==rp.mg.common.Logger.componentLimitList||rp.mg.common.Logger.componentLimitList.indexOf(this._className)>-1){var s=rp.mg.common.Logger._orderNumber++;"undefined"!=rp.mg.common.Logger.appName&&""!=rp.mg.common.Logger.appName&&(s+=". ["+rp.mg.common.Logger.appName+"]"),s+="["+t+"]",s+="["+this._className+"]: ",s+=e,"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log(s)}}.bind(this)},function(e){e.debug=function(e){rp.mg.common.Logger.traceLevel>=rp.mg.common.Logger.TRACE_LEVEL_DEBUG&&this._logMessage(e,"DEBUG")},e.info=function(e){rp.mg.common.Logger.traceLevel>=rp.mg.common.Logger.TRACE_LEVEL_INFO&&this._logMessage(e,"INFO")},e.error=function(e){rp.mg.common.Logger.traceLevel>=rp.mg.common.Logger.TRACE_LEVEL_ERROR&&this._logMessage(e,"ERROR")}}(rp.mg.common.Logger.prototype),rp.mg.common.Logger._orderNumber=1,rp.mg.common.Logger.traceLevel=2,rp.mg.common.Logger.componentLimitList="",rp.mg.common.Logger.appName="",rp.mg.common.Logger.TRACE_LEVEL_NONE=0,rp.mg.common.Logger.TRACE_LEVEL_ERROR=1,rp.mg.common.Logger.TRACE_LEVEL_INFO=2,rp.mg.common.Logger.TRACE_LEVEL_DEBUG=3,define("rp/mg/common/rpLogger",function(){}),rp.mg.widget.AppConfig={configId:-1,listSlideTime:600,carouselStartDelay:10,carouselItemToItemDelay:10,supportedLanguages:["en","es","pt","zh-hans"],supportedCurrencies:[{code:"USD",symbol:"$"},{code:"CAD",symbol:"$"},{code:"CNY",symbol:"¥"},{code:"MYR",symbol:"RM"},{code:"THB",symbol:"฿"},{code:"BRL",symbol:"R$"},{code:"ARS",symbol:""},{code:"VEF",symbol:""},{code:"PEN",symbol:""},{code:"BOB",symbol:""},{code:"MXN",symbol:""}],lobbyServicesURL:"/services/casino/casino-lobby-services/games/{GAMES_IDS}{LAUNCH_SUFFIX}?siteId={SITE_ID}&currencyCode={CURRENCY_CODE}&language={LANGUAGE}&mode={PLAY_MODE}",loggerTraceLevel:0,sessionCookieNameDefault:"CASTGC",balanceUpdateEventNameDefault:"balanceStorageSaved",applicationId:"rp-mg-widget",attractModeIterationMilliseconds:1e4},define("rp/mg/widget/appConfig",function(){}),rp.mg.widget.const=rp.mg.widget.const||{},rp.mg.widget.const.ButtonIds={GAMES:"mgWdg-btn-games",INFO:"mgWdg-btn-info",SOUND:"mgWdg-btn-sound"},rp.mg.widget.const.Model={READY:0,GAME_URL_LOADED:1,ERROR_UNAUTHORIZED:90,STARTING_GAME_LOADING:2},rp.mg.widget.const.MessageIds={GAME_BALANCE:"minigameBalance",TOGGLE_INFO_VIEW:"toggleInfoView",TOGGLE_GAMES_LIST:"toggleGamesList",UNPRESS_INFO_BUTTON:"unpressInfoButton",PRESS_INFO_BUTTON:"pressInfoButton",PLAYER_INACTIVE:"playerInactive",TOGGLE_SOUND:"toggleSound",OPEN_CASHIER:"openCashier",REFRESH_ME:"refreshMe",GAME_LOADED:"gameLoaded"},rp.mg.widget.const.StorageKeys={WIDGET_SESSION:"mgWdg-sessionDetails",GAME_SOUND_MUTE:"rpCommonSoundsMute",BALANCE:"uiApp-balance"},define("rp/mg/widget/constants",function(){}),rp.mg.widget.GameAdapter={_balanceUpdateCallback:void 0,_gameViewActionCallback:void 0,_gameLoadedCallback:void 0,_logger:void 0,init:function(e,t,s){this._logger=new rp.mg.common.Logger("GameAdapter"),this._balanceUpdateCallback=e,this._gameViewActionCallback=t,this._gameLoadedCallback=s,rp.mg.common.Utils.addJSEventListener(window,"message",this._receiveGamePostMessage.bind(this))},_receiveGamePostMessage:function(e){if(this._logger.debug("_receiveGamePostMessage event.origin: "+e.origin+", location.protocol: "+location.protocol+", location.hostname: "+location.hostname+", document.domain: "+document.domain),e.origin===location.protocol+"//"+location.hostname){var t=JSON.parse(e.data);switch(this._logger.info("_receiveGamePostMessage event.origin: "+e.origin+", document.domain: "+document.domain+", data.value: "+t.value+", data.name: "+t.name),t.name){case rp.mg.widget.const.MessageIds.GAME_BALANCE:this._balanceUpdateCallback.call(null,t.value,t.confirmed);break;case rp.mg.widget.const.MessageIds.GAME_LOADED:this._gameLoadedCallback.call();break;default:this._gameViewActionCallback.call(null,t.name)}}},_postMessage:function(e,t){this._logger.info("_postMessage() message = "+e+", value = "+t);var s={name:e,value:t};postMessage(JSON.stringify(s),"*")},toggleSound:function(e){this._postMessage(rp.mg.widget.const.MessageIds.TOGGLE_SOUND,e)},saveMuteState:function(e){try{"undefined"!=typeof localStorage?localStorage.setItem(rp.mg.widget.const.StorageKeys.GAME_SOUND_MUTE,e):this._logger.error("Session storage is not available")}catch(t){this._logger.error("Session storage is not available e: "+t)}},toggleInfoPopup:function(e){this._postMessage(rp.mg.widget.const.MessageIds.TOGGLE_INFO_VIEW,e)},toggleGamesPopup:function(e){this._postMessage(rp.mg.widget.const.MessageIds.TOGGLE_GAMES_LIST,e)}},define("rp/mg/widget/gameAdapter",function(){}),rp.mg.widget.Model={_updateCallback:void 0,_logger:void 0,_launchParams:void 0,_skinLoaded:!1,_balance:0/0,_selectedGame:void 0,_activeGamesList:void 0,_loadingGame:!1,appConfig:void 0,contentConfig:void 0,labels:void 0,sessionDetails:void 0,screenshotImages:void 0,numAttemps:0,init:function(e){if("function"!=typeof e)throw new TypeError("_updateCallback has to be a function");if(this._updateCallback=e,this.appConfig=rp.mg.widget.AppConfig,this._logger=new rp.mg.common.Logger("Model"),!this._parseURLParams())throw new Error("Cannot parse URL parameters. Quitting.");this._loadLabels(),this._loadContentConfig()},loadGame:function(){this._loadingGame=!0,this._notifySubscribers(rp.mg.widget.const.Model.STARTING_GAME_LOADING);var e=this.appConfig.lobbyServicesURL.replace("{LAUNCH_SUFFIX}","/launch").replace("{GAMES_IDS}",this._selectedGame.gameId).replace("{SITE_ID}",this.contentConfig.siteId).replace("{CURRENCY_CODE}",this._launchParams.currency).replace("{PLAY_MODE}",this._launchParams.playMode).replace("{LANGUAGE}",this._launchParams.language);$.get(e).fail(function(t){throw 400==t.status&&this._notifySubscribers(rp.mg.widget.const.Model.ERROR_UNAUTHORIZED),new Error("loadGame() cannot load: "+e)}.bind(this)).done(function(e){this.gameContent=e,this._notifySubscribers(rp.mg.widget.const.Model.GAME_URL_LOADED)}.bind(this))},setBalance:function(e){this._balance=e},setSelectedGame:function(e){this._selectedGame=e,this.saveSessionDetails()},getSelectedGame:function(){return this._selectedGame},getFormattedBalance:function(){var e=this._launchParams.currencySymbol+rp.mg.common.Utils.formatMoney(this._balance/100);return e},getActiveGamesList:function(){return this._activeGamesList},getLoadingGame:function(){return this._loadingGame},setLoadingGame:function(e){this._loadingGame=e},_setActiveGamesList:function(){this._activeGamesList=[];for(var e=0,t=this.contentConfig.gamesList.length;t>e;e++){var s=this.contentConfig.gamesList[e];s.isActive&&this._activeGamesList.push(s)}},_setSelectedGameById:function(e){if("undefined"==typeof this._selectedGame||this._selectedGame.gameId!=e){for(var t,s=0,i=this._activeGamesList.length;"undefined"==typeof t&&i>s;)e===this._activeGamesList[s].gameId&&(t=this._activeGamesList[s]),s++;this.setSelectedGame(t)}},_proceedIfAllLoaded:function(){void 0!=this.contentConfig&&void 0!=this.labels&&this._skinLoaded&&(this._logger.debug("_proceedIfAllLoaded all loaded"),void 0!=this.sessionDetails&&"undefined"!=typeof this.sessionDetails.gameId&&this._setSelectedGameById(this.sessionDetails.gameId),this._notifySubscribers(rp.mg.widget.const.Model.READY))},_notifySubscribers:function(e){this._logger.debug("_notifySubscribers messageId: "+e),this._updateCallback.call(null,e)},_parseURLParams:function(){var e=!0;this._launchParams={};for(var t=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),s=0;s<t.length;s++){var i=t[s].split("=");this._launchParams[i[0]]=i[1]}if(rp.mg.common.Logger.appName="MgWidget","undefined"==typeof this._launchParams.loggerTraceLevel||""==this._launchParams.loggerTraceLevel||isNaN(this._launchParams.loggerTraceLevel)||(this.appConfig.loggerTraceLevel=this._launchParams.loggerTraceLevel),rp.mg.common.Logger.traceLevel=this.appConfig.loggerTraceLevel,"undefined"!=typeof this._launchParams.loggerComponentLimit&&""!=this._launchParams.loggerComponentLimit&&(rp.mg.common.Logger.componentLimitList=this._launchParams.loggerComponentLimit),this._launchParams.playMode="real","undefined"!=typeof this._launchParams.forReal&&""!=this._launchParams.forReal&&"false"===this._launchParams.forReal.toLowerCase()&&(this._launchParams.playMode="practice"),("undefined"==typeof this._launchParams.sessionCookieName||""==this._launchParams.sessionCookieName)&&(this._launchParams.sessionCookieName=this.appConfig.sessionCookieNameDefault),("undefined"==typeof this._launchParams.balanceUpdateEventName||""==this._launchParams.balanceUpdateEventName)&&(this._launchParams.balanceUpdateEventName=this.appConfig.balanceUpdateEventNameDefault),("undefined"==typeof this._launchParams.configId||""==this._launchParams.configId||isNaN(this._launchParams.configId)||this._launchParams.configId>9||this._launchParams.configId<-1)&&(this._launchParams.configId=this.appConfig.configId),("undefined"==typeof this._launchParams.siteId||""==this._launchParams.siteId||isNaN(this._launchParams.siteId))&&(e=!1,this._logger.error("Missing or wrong one of required url parameters: siteId")),!e||"undefined"!=typeof this._launchParams.language&&""!=this._launchParams.language&&-1!=this.appConfig.supportedLanguages.indexOf(this._launchParams.language)||(this._launchParams.language=this.appConfig.supportedLanguages[0]),e){for(var a={},o=0,n=this.appConfig.supportedCurrencies.length;n>o;o++)a[this.appConfig.supportedCurrencies[o].code.toUpperCase()]=this.appConfig.supportedCurrencies[o].symbol;"undefined"!=typeof this._launchParams.currency&&""!=this._launchParams.currency&&a.hasOwnProperty(this._launchParams.currency.toUpperCase())||(this._launchParams.currency=this.appConfig.supportedCurrencies[0].code),this._launchParams.currencySymbol=a[this._launchParams.currency.toUpperCase()]}return e},_loadContentConfig:function(){function e(e){return e.gamesList.slice(0).forEach(function(e){e.screenshot=e.screenshot+"?v=1.32"}),e}$.getJSON("data/content_configId_"+this._launchParams.configId+"_language_"+this._launchParams.language+".json?v=1.32").done(function(t){this._logger.debug("configURL loaded"),this.contentConfig=e(t),this.contentConfig.siteId=this._launchParams.siteId,this._setActiveGamesList(),this._retrieveSessionDetailsIfValid(),this._loadSkin(),this._loadScreenshots()}.bind(this)).fail(function(){this.numAttemps++,this.numAttemps<2&&(this._launchParams.language="en",this._loadContentConfig())}.bind(this))},_loadLabels:function(){{var e="assets/labels/"+this._launchParams.language+".json?v=1.32";$.getJSON(e).fail(function(){throw new Error("_loadLabels() cannot get file from: "+e)}).done(function(e){this._logger.debug("_loadLabels loaded"),this.labels=e,this._proceedIfAllLoaded()}.bind(this))}},_loadSkin:function(){{var e="css/"+this.contentConfig.colorSchema+".css?v=1.32";$.get(e).fail(function(){throw new Error("_loadSkin() cannot get file from: "+e)}).done(function(e){$("<style></style>").appendTo("head").html(e),this._logger.debug("_loadSkin loaded"),this._skinLoaded=!0,this._proceedIfAllLoaded()}.bind(this))}},_loadScreenshots:function(){this.screenshotImages={};for(var e=0,t=this._activeGamesList.length;t>e;e++){var s=this._activeGamesList[e],i=new Image;i.src=s.screenshot,this.screenshotImages[s.gameId]=i}},_hasActiveWebSession:function(e){var t=rp.mg.common.Utils.getCookie(this._launchParams.sessionCookieName),s="undefined"!=typeof e&&"undefined"!=typeof e.cookieValue&&"undefined"!=typeof t&&e.cookieValue===t&&e.shouldRestoreGame&&e.forReal;return s},_retrieveSessionDetailsIfValid:function(){if(this.sessionDetails=void 0,"undefined"!=typeof localStorage&&"undefined"!=typeof localStorage.getItem(rp.mg.widget.const.StorageKeys.WIDGET_SESSION)&&null!==localStorage.getItem(rp.mg.widget.const.StorageKeys.WIDGET_SESSION)){var e=JSON.parse(localStorage.getItem(rp.mg.widget.const.StorageKeys.WIDGET_SESSION));this._hasActiveWebSession(e)&&(this.sessionDetails=e)}},saveSessionDetails:function(){var e=this._hasActiveWebSession(this.sessionDetails);this.sessionDetails={},this.sessionDetails.cookieValue=rp.mg.common.Utils.getCookie(this._launchParams.sessionCookieName),void 0!=this._selectedGame&&(this.sessionDetails.gameId=this._selectedGame.gameId);try{if("undefined"!=typeof localStorage){if(this.sessionDetails.soundOn=!0,e){var t=localStorage.getItem(rp.mg.widget.const.StorageKeys.GAME_SOUND_MUTE);"undefined"!=typeof t&&(this.sessionDetails.soundOn="false"===t)}localStorage.setItem(rp.mg.widget.const.StorageKeys.WIDGET_SESSION,JSON.stringify(this.sessionDetails))}else this._logger.error("Local storage is not available")}catch(s){this._logger.error("Local storage is not available e: "+s)}}},define("rp/mg/widget/model",function(){}),rp.mg.widget.ParentAppAdapter={_balanceUpdateCallback:void 0,_logger:void 0,_context:parent,_postMessage:function(e,t){this._logger.debug("_postMessage: "+e+", value: "+t);var s={name:e,value:t};this._context.postMessage(JSON.stringify(s),"*")},_receiveBalanceUpdate:function(){"undefined"!=typeof this._balanceUpdateCallback&&this._balanceUpdateCallback.call(null,this._getBalanceFromLocalStorage(),!1)},_getBalanceFromLocalStorage:function(){var e;if("undefined"!=typeof localStorage){var t=localStorage.getItem(rp.mg.widget.const.StorageKeys.BALANCE);"undefined"!=typeof t&&null!==t&&(e=t)}return e},init:function(e){if(this._logger=new rp.mg.common.Logger("ParentAppAdapter"),this._balanceUpdateCallback=e,void 0!=this._balanceUpdateCallback){var t=this._getBalanceFromLocalStorage();isNaN(t)||this._balanceUpdateCallback.call(null,t,!1),rp.mg.common.Utils.addJSEventListener(this._context.window,rp.mg.widget.AppConfig.balanceUpdateEventNameDefault,this._receiveBalanceUpdate.bind(this))}},removeBalanceUpdateCallback:function(){rp.mg.common.Utils.removeJSEventListener(this._context.window,rp.mg.widget.AppConfig.balanceUpdateEventNameDefault,this._receiveBalanceUpdate.bind(this)),delete this._balanceUpdateCallback},launchHelpPage:function(e){this._postMessage(rp.mg.widget.const.MessageIds.OPEN_HELP,e)},launchFullGame:function(e){this._postMessage(rp.mg.widget.const.MessageIds.OPEN_FULL_VERSION,e)},launchCashier:function(){this._postMessage(rp.mg.widget.const.MessageIds.OPEN_CASHIER)},sendBalanceUpdate:function(e){this._postMessage(rp.mg.widget.const.MessageIds.GAME_BALANCE,e)}},define("rp/mg/widget/parentAppAdapter",function(){}),rp.mg.widget.View={_logger:void 0,_model:void 0,_buttonClickCallback:void 0,_attractModeInterval:void 0,_currentAttractModeIndex:0,isMenuListOpen:!1,widgetOverlay:void 0,init:function(e){this._logger=new rp.mg.common.Logger("View"),this._model=rp.mg.widget.Model,this._buttonClickCallback=e,this._setLabels(),this._createGameList(),this._showLayout(),this.widgetOverlay=$(".mgWdg-overlay").parent(),"undefined"==typeof this._model.getSelectedGame()&&this.startStopAttractMode(!0,!0)},displayError:function(e){$("#mgWdg-game").html("error: "+e)},displayGameContent:function(){$("#mgWdg-game").html(this._model.gameContent)},startStopAttractMode:function(e,t){e?("undefined"!=typeof t&&t&&this._attractModeNextStep(),"undefined"!=typeof this._attractModeInterval&&clearInterval(this._attractModeInterval),this._attractModeInterval=setInterval(this._attractModeNextStep.bind(this),this._model.appConfig.attractModeIterationMilliseconds)):(clearInterval(this._attractModeInterval),this._attractModeInterval=void 0)},updateBalance:function(){var e=this._model.getFormattedBalance();$("#mgWdg-lbl-balanceValue").html(e)},pressSoundButton:function(){$("#"+rp.mg.widget.const.ButtonIds.SOUND).addClass("off")},unpressInfoButton:function(){$("#"+rp.mg.widget.const.ButtonIds.INFO).removeClass("pressed")},pressInfoButton:function(){$("#"+rp.mg.widget.const.ButtonIds.INFO).addClass("pressed")},disableInfoSoundButtons:function(){$("#"+rp.mg.widget.const.ButtonIds.SOUND).addClass("disabled"),$("#"+rp.mg.widget.const.ButtonIds.INFO).addClass("disabled")},enableInfoSoundButtons:function(){$("#"+rp.mg.widget.const.ButtonIds.SOUND).removeClass("disabled"),$("#"+rp.mg.widget.const.ButtonIds.INFO).removeClass("disabled")},disableInfoButton:function(){$("#"+rp.mg.widget.const.ButtonIds.INFO).addClass("disabled")},enableInfoButton:function(){$("#"+rp.mg.widget.const.ButtonIds.INFO).removeClass("disabled")},disableSoundButton:function(){$("#"+rp.mg.widget.const.ButtonIds.SOUND).addClass("disabled")},enableSoundButton:function(){$("#"+rp.mg.widget.const.ButtonIds.SOUND).removeClass("disabled")},_attractModeNextStep:function(){$("#mgWdg-lbl-title").html()!==this._model.labels.playGamesLbl&&this.setWidgetHeader(this._model.labels.playGamesLbl),this._currentAttractModeIndex<0&&(this._currentAttractModeIndex=0),this.isMenuListOpen||this._showHideMenuList();var e=this._model.getActiveGamesList()[this._currentAttractModeIndex];this._markHighlightGameTitle(this._currentAttractModeIndex),this._displayGameShot(e.gameId,this._currentAttractModeIndex),this._currentAttractModeIndex++,this._currentAttractModeIndex>=this._model.getActiveGamesList().length&&(this._currentAttractModeIndex=0)},_setSkinning:function(){},_loadGameIfPossible:function(e){var t=this._model.getActiveGamesList()[e||0],s=this._model.getSelectedGame();if("undefined"==typeof t&&(this._currentAttractModeIndex>=0||"undefined"==typeof s))if("undefined"==typeof s&&this._currentAttractModeIndex<0)t=this._model.getActiveGamesList()[0];else{var i=this._currentAttractModeIndex-1<0?this._model.getActiveGamesList().length-1:this._currentAttractModeIndex-1;t=this._model.getActiveGamesList()[i]}("undefined"==typeof e&&"undefined"==typeof s||"undefined"!=typeof e&&("undefined"==typeof s||"undefined"!=typeof t&&s.gameId!=t.gameId))&&(this._model.setSelectedGame(t),this._model.loadGame(),this.unpressInfoButton()),this._showHideMenuList()},setWidgetHeader:function(e){$("#mgWdg-lbl-title").html(e)},_setLabels:function(){this.setWidgetHeader(this._model.labels.playGamesLbl),$("#mgWdg-lbl-balance").html(this._model.labels.balanceLbl),$("#mgWdg-lbl-games").html(this._model.labels.gamesLbl)},_markSelectedGameTitle:function(){var e=$("#mgWdg-content li"),t=this._model.getSelectedGame();if("undefined"!=typeof t)for(var s=0;s<e.length;s++)e[s].getAttribute("data-gameid")==t.gameId?$(e[s]).addClass("selected"):$(e[s]).hasClass("selected")&&$(e[s]).removeClass("selected")},_showLayout:function(){$("body").removeClass("mgWdg-hidden"),this._addButtonClickHandlers(),void 0==this._model.sessionDetails||isNaN(this._model.sessionDetails.gameId)?this._showHideMenuList():this._markSelectedGameTitle()},_displayGameShot:function(e){if(!e){var t=this._model.getSelectedGame()||this._model.getActiveGamesList()[0];e=t.gameId}$("#mgWdg-gameshots").html(this._model.screenshotImages[e])},_onItemMouseOver:function(e){var t=$("#mgWdg-content li");this._resetMenuItemsClasses(t,!1),this._displayGameShot(e),this._currentAttractModeIndex=-1},_createGameList:function(){var e=$("<ul>"),t=this._model.getActiveGamesList(),s=$("#mgWdg-content"),i=this._model.getSelectedGame();"undefined"==typeof i&&(i=this._model.getActiveGamesList()[0]);for(var a=0;12>a;a++){var o;a<t.length?(o=$('<li data-gameid="'+t[a].gameId+'">'+t[a].title+"</li>"),t[a].gameId==i.gameId&&(o.addClass("hovered"),this._displayGameShot(i.gameId,a)),o.on("click",this._loadGameIfPossible.bind(this,a)),o.on("mouseover",this._onItemMouseOver.bind(this,t[a].gameId)),o.on("mouseout",this._displayGameShot.bind(this,null))):(o=$("<li/>"),o.addClass("empty")),e.append(o)}$("#mgWdg-gameshots").on("click",this._loadGameIfPossible.bind(this)),s.html(e)},_resetMenuItemsClasses:function(e,t){for(var s=0;s<e.length;s++)$(e[s]).hasClass("hovered")&&$(e[s]).removeClass("hovered"),$(e[s]).hasClass("selected")&&t&&$(e[s]).removeClass("selected")},_markHighlightGameTitle:function(e){var t=$("#mgWdg-content li");this._resetMenuItemsClasses(t,!0),$(t[e]).addClass("hovered")},_addButtonClickHandlers:function(){$("#"+rp.mg.widget.const.ButtonIds.GAMES).on("click",this._onButtonClick.bind(this)),$("#"+rp.mg.widget.const.ButtonIds.INFO).on("click",this._onButtonClick.bind(this)),$("#"+rp.mg.widget.const.ButtonIds.SOUND).on("click",this._onButtonClick.bind(this))},_showHideMenuList:function(e){if($("#mgWdg-content").slideToggle(this._model.appConfig.listSlideTime,"easeOutCirc"),$("#"+rp.mg.widget.const.ButtonIds.GAMES).toggleClass("open"),this.isMenuListOpen=$("#"+rp.mg.widget.const.ButtonIds.GAMES).hasClass("open"),this._buttonClickCallback.call(null,rp.mg.widget.const.ButtonIds.GAMES,this.isMenuListOpen),"undefined"!=typeof e&&e||this.isMenuListOpen)$("#mgWdg-gameshots").removeClass("mgWdg-hidden"),$("#"+rp.mg.widget.const.ButtonIds.INFO).addClass("disabled"),this._markSelectedGameTitle();else{$("#mgWdg-gameshots").addClass("mgWdg-hidden"),this._model.getLoadingGame()||$("#"+rp.mg.widget.const.ButtonIds.INFO).removeClass("disabled");var t=this._model.getSelectedGame();"undefined"!=typeof t&&this.setWidgetHeader(t.title)}},_onButtonClick:function(e){switch(this._logger.debug("_onButtonClick e: "+e.currentTarget.id),e.currentTarget.id){case rp.mg.widget.const.ButtonIds.GAMES:$("#"+rp.mg.widget.const.ButtonIds.GAMES).hasClass("open")?this._loadGameIfPossible():this._showHideMenuList();break;case rp.mg.widget.const.ButtonIds.SOUND:if(!$("#"+rp.mg.widget.const.ButtonIds.SOUND).hasClass("disabled")){var t=$("#"+e.currentTarget.id);t.toggleClass("off"),this._buttonClickCallback.call(null,e.currentTarget.id,!t.hasClass("off"))}break;case rp.mg.widget.const.ButtonIds.INFO:if(!$("#"+rp.mg.widget.const.ButtonIds.INFO).hasClass("disabled")){var t=$("#"+e.currentTarget.id);t.toggleClass("pressed"),this._buttonClickCallback.call(null,e.currentTarget.id,t.hasClass("pressed"))}break;default:this._buttonClickCallback.call(null,e.currentTarget.id)}}},define("rp/mg/widget/view",function(){});